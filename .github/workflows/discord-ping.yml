name: Admin Auto Ping ‚ú®

on:
  schedule:
    - cron: "0 * * * *"
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord ping
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        run: |
          set +e

          HOUR=$(TZ=America/New_York date +%H)
          MESSAGE=""

          if [ "$HOUR" = "08" ]; then
            MESSAGE="üå∏ Admin Coverage (8‚Äì9 ET) | VP: Dev | Active: Dreamy"
          elif [ "$HOUR" = "09" ]; then
            MESSAGE="‚òÅÔ∏è Admin Coverage (9‚Äì10 ET) | VP: Dev | Active: Kat"
          elif [ "$HOUR" = "10" ]; then
            MESSAGE="üåà Admin Coverage (10‚Äì11 ET) | VP: Dev | Active: Raina"
          elif [ "$HOUR" = "13" ]; then
            MESSAGE="üåº Admin Coverage (1‚Äì2 ET) | VP: Rae | Trial: Yousra"
          elif [ "$HOUR" = "15" ]; then
            MESSAGE="üçÉ Admin Coverage (3‚Äì4 ET) | VP: Dev | Trial: Rishi"
          else
            echo "No message this hour"
            exit 0
          fi

          if [ -z "$DISCORD_WEBHOOK" ]; then
            echo "Webhook missing"
            exit 0
          fi

          curl -s -X POST \
            -H "Content-Type: application/json" \
            -d "{\"content\":\"$MESSAGE\"}" \
            "$DISCORD_WEBHOOK"

          echo "Ping sent"
